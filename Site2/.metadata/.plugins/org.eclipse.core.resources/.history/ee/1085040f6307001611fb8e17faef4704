<%@page import="java.util.ArrayList"%>
<%@page import="com.sun.rowset.CachedRowSetImpl"%>
<%@page import="java.sql.ResultSet"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
 
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Search Movies</title>
<link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>
<%@include file="header.jsp" %>
	<div class="searchContainer">
		<input 
			id="dbSearchBox" 
			class="dbSearchBox" 
			placeholder="Movie Title, star name, year, or director " 
			onkeydown = "if (event.keyCode == 13)
                        document.getElementById('searchButton').click()" 
        	/>
		<input 
			id="searchButton" 
			class="searchButton" 
			type="button" 
			value="submit" 
			onclick="submitSearch()" 
			/>
	</div>
	<%CachedRowSetImpl rs = (CachedRowSetImpl)request.getSession().getAttribute("rs"); %>
	<%ArrayList<ArrayList<String>> moviesAndStars = (ArrayList<ArrayList<String>>)request.getSession().getAttribute("moviesAndStars"); %>
	<%if(rs != null) {%>
	<%int j = 0; %>
		
		<%while(rs.next()){%>
			<div>
				<div class="movieInfoDiv"> ${rs.getString(2)} </div> 
				<div class="movieInfoDiv"> ${rs.getString(3)} </div>  
				<div class="movieInfoDiv"> ${rs.getString(4)} </div>
				<div class="starNames movieInfoDiv">
					<div>
					<%for(int i = 0;  i < moviesAndStars.get(j).size(); i++) {%>
						<%request.getSession().setAttribute("tempString", (String)moviesAndStars.get(j).get(i));%>
						${tempString}
						<%if((i+1)%4 == 0){ %>
						</div><div>
						<%} %>
					<%} %>
					</div>
				</div>
			</div>
			<%j++; %>
		<%} %>
	<%} %>
	<script type="text/javascript" src="js/searchScript.js"></script>
</body>
</html>	